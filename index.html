<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live DAW</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="daw-container">
        <!-- Top Transport & DAW Info Bar -->
        <div class="transport-bar">
            <div class="daw-info">
                <div class="time-display">
                    <div class="label">TIME</div>
                    <div id="time-display" class="value">01:01:0.0</div>
                </div>
                <div class="bpm-display">
                    <div class="label">BPM</div>
                    <input id="bpm-input" type="number" min="20" max="300" value="120" class="bpm-input">
                </div>
                <div class="loop-info">
                    <div class="label">LOOP</div>
                    <div id="loop-display" class="value">4 bars</div>
                </div>
            </div>

            <!-- Transport Buttons -->
            <div class="transport-controls">
                <button id="play-btn" class="transport-btn play-btn" title="Play">▶</button>
                <button id="stop-btn" class="transport-btn stop-btn" title="Stop">■</button>
                <button id="record-btn" class="transport-btn record-btn" title="Record">⦿</button>
                <button id="metronome-btn" class="transport-btn metronome-btn" title="Metronome">♩</button>
                <div id="recording-indicator" class="recording-indicator"></div>
            </div>

            <!-- Octave Controls -->
            <div class="octave-controls">
                <button id="octave-down-btn" class="octave-btn">-OCT</button>
                <div id="octave-display" class="octave-value">C4</div>
                <button id="octave-up-btn" class="octave-btn">+OCT</button>
            </div>
        </div>

        <!-- Main DAW Layout -->
        <div class="daw-layout">
            <!-- Left Sidebar: Oscilloscope + Info -->
            <div class="left-sidebar">
                <!-- Oscilloscope Module -->
                <div class="module oscilloscope-module">
                    <div class="module-header">
                        <span class="module-title">WAVEFORM</span>
                    </div>
                    <div class="oscilloscope-container">
                        <canvas id="oscilloscope"></canvas>
                    </div>
                </div>

                <!-- Keyboard Info -->
                <div class="module keyboard-info-module">
                    <div class="module-header">
                        <span class="module-title">INFO</span>
                    </div>
                    <div class="module-content">
                        <p class="info-label">QWERTY / ASDFGH</p>
                        <p class="active-notes">Notes: <span id="active-notes-count">0</span></p>
                    </div>
                </div>
            </div>

            <!-- Right Side: Control Modules in Columns -->
            <div class="controls-area">
                <!-- Column 1: Sound Sources -->
                <div class="control-column">
                    <!-- Oscillator Module -->
                    <div class="module">
                        <div class="module-header">
                            <span class="module-title">OSCILLATOR</span>
                        </div>
                        <div class="module-content">
                            <div class="wave-selector">
                                <button class="wave-btn active" data-wave="sine">SINE</button>
                                <button class="wave-btn" data-wave="square">SQR</button>
                                <button class="wave-btn" data-wave="sawtooth">SAW</button>
                                <button class="wave-btn" data-wave="triangle">TRI</button>
                            </div>
                            <div class="knobs-row">
                                <div class="knob-container">
                                    <div class="knob" id="master-volume-knob" data-param="master-volume">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="master-volume-value">50</div>
                                        <div class="knob-label">VOL</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Unison & Effects Module -->
                    <div class="module">
                        <div class="module-header">
                            <span class="module-title">VOICE</span>
                        </div>
                        <div class="module-content">
                            <div class="unison-toggle">
                                <button id="unison-toggle-btn" class="toggle-btn">UNISON: OFF</button>
                            </div>
                            <div class="knobs-row">
                                <div class="knob-container">
                                    <div class="knob" id="unison-detune-knob" data-param="unison-detune">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="unison-detune-value">5</div>
                                        <div class="knob-label">DTUNE</div>
                                    </div>
                                </div>
                                <div class="knob-container">
                                    <div class="knob" id="noise-amount-knob" data-param="noise-amount">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="noise-amount-value">0</div>
                                        <div class="knob-label">NOISE</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column 2: Envelopes -->
                <div class="control-column">
                    <!-- Amplitude ADSR Envelope Module -->
                    <div class="module">
                        <div class="module-header">
                            <span class="module-title">AMPLITUDE</span>
                        </div>
                        <div class="module-content">
                            <div class="knobs-row">
                                <div class="knob-container">
                                    <div class="knob" id="attack-knob" data-param="attack">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="attack-value">10</div>
                                        <div class="knob-label">ATK</div>
                                    </div>
                                </div>
                                <div class="knob-container">
                                    <div class="knob" id="decay-knob" data-param="decay">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="decay-value">100</div>
                                        <div class="knob-label">DEC</div>
                                    </div>
                                </div>
                            </div>
                            <div class="knobs-row">
                                <div class="knob-container">
                                    <div class="knob" id="sustain-knob" data-param="sustain">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="sustain-value">70</div>
                                        <div class="knob-label">SUS</div>
                                    </div>
                                </div>
                                <div class="knob-container">
                                    <div class="knob" id="release-knob" data-param="release">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="release-value">200</div>
                                        <div class="knob-label">REL</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Filter Envelope Module -->
                    <div class="module">
                        <div class="module-header">
                            <span class="module-title">FILTER ENV</span>
                        </div>
                        <div class="module-content">
                            <div class="knobs-row">
                                <div class="knob-container">
                                    <div class="knob" id="filter-env-atk-knob" data-param="filter-env-atk">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="filter-env-atk-value">50</div>
                                        <div class="knob-label">ATK</div>
                                    </div>
                                </div>
                                <div class="knob-container">
                                    <div class="knob" id="filter-env-dec-knob" data-param="filter-env-dec">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="filter-env-dec-value">200</div>
                                        <div class="knob-label">DEC</div>
                                    </div>
                                </div>
                            </div>
                            <div class="knobs-row">
                                <div class="knob-container">
                                    <div class="knob" id="filter-env-amt-knob" data-param="filter-env-amt">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="filter-env-amt-value">3000</div>
                                        <div class="knob-label">AMT</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column 3: Filter & Distortion -->
                <div class="control-column">
                    <!-- Filter Module -->
                    <div class="module">
                        <div class="module-header">
                            <span class="module-title">FILTER</span>
                        </div>
                        <div class="module-content">
                            <div class="filter-type-selector">
                                <button class="filter-type-btn active" data-filter="lowpass">LP</button>
                                <button class="filter-type-btn" data-filter="highpass">HP</button>
                                <button class="filter-type-btn" data-filter="bandpass">BP</button>
                            </div>
                            <div class="knobs-row">
                                <div class="knob-container">
                                    <div class="knob" id="filter-cutoff-knob" data-param="filter-cutoff">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="filter-cutoff-value">5000</div>
                                        <div class="knob-label">CUT</div>
                                    </div>
                                </div>
                                <div class="knob-container">
                                    <div class="knob" id="filter-resonance-knob" data-param="filter-resonance">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="filter-resonance-value">1.0</div>
                                        <div class="knob-label">RES</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Distortion Module -->
                    <div class="module">
                        <div class="module-header">
                            <span class="module-title">DISTORTION</span>
                        </div>
                        <div class="module-content">
                            <div class="knobs-row">
                                <div class="knob-container">
                                    <div class="knob" id="distortion-knob" data-param="distortion">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="distortion-value">0</div>
                                        <div class="knob-label">DRIVE</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column 4: Modulation -->
                <div class="control-column">
                    <!-- LFO Module -->
                    <div class="module">
                        <div class="module-header">
                            <span class="module-title">LFO</span>
                        </div>
                        <div class="module-content">
                            <div class="lfo-target-selector">
                                <button class="lfo-target-btn active" data-target="cutoff">CUT</button>
                                <button class="lfo-target-btn" data-target="amplitude">AMP</button>
                                <button class="lfo-target-btn" data-target="pitch">PIT</button>
                            </div>
                            <div class="knobs-row">
                                <div class="knob-container">
                                    <div class="knob" id="lfo-rate-knob" data-param="lfo-rate">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="lfo-rate-value">2.0</div>
                                        <div class="knob-label">RATE</div>
                                    </div>
                                </div>
                                <div class="knob-container">
                                    <div class="knob" id="lfo-depth-knob" data-param="lfo-depth">
                                        <div class="knob-indicator"></div>
                                        <div class="knob-value" id="lfo-depth-value">20</div>
                                        <div class="knob-label">DEPTH</div>
                                    </div>
                                </div>
                            </div>
                            <div class="lfo-wave-selector">
                                <button class="lfo-wave-btn active" data-wave="sine">SIN</button>
                                <button class="lfo-wave-btn" data-wave="triangle">TRI</button>
                                <button class="lfo-wave-btn" data-wave="square">SQR</button>
                                <button class="lfo-wave-btn" data-wave="sawtooth">SAW</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="audio-engine.js"></script>
    <script src="daw-core.js"></script>
    <script src="keyboard-controller.js"></script>
    <script src="oscilloscope.js"></script>
    <script src="knob.js"></script>
    <script src="app.js"></script>
</body>
</html>
